#:kivy 1.10.1
#File name: main.py
#:include login.kv
#: import FadeTransition kivy.uix.screenmanager.FadeTransition
#: import Window kivy.core.window.Window

ScreenManagement:
    id: screenmanager
    transition: FadeTransition()
    LoginPage:
    SignUpPage:
    Logout_Confirm:
    Stalls:
    My_Orders:
    Favourites:

# <MainPage>:
#     name: "main"
#     canvas.before:
#         Color:
#             rgba: 1, 1, 1, 1
#         Rectangle:
#             pos: self.pos
#             size: self.size
#     FloatLayout:
#         Button:
#             text: "Stalls"
#             font_size: root._buttonfontsize
#             size_hint: 1, 0.15
#             pos_hint: {"top": 1}
#             on_release: app.root.current = "stalls"
#         Button:
#             text: "Dishes"
#             font_size: root._buttonfontsize
#             size_hint: 1, 0.15
#             pos_hint: {"top": 0.8}
#             on_release: app.root.current = "dishes"
#         Button:
#             text: "Orders"
#             font_size: root._buttonfontsize
#             size_hint: 1, 0.15
#             pos_hint: {"top": 0.6}
#             on_release: app.root.current = "orders"
#         Button:
#             text: "Favourites"
#             font_size: root._buttonfontsize
#             size_hint: 1, 0.15
#             pos_hint: {"top": 0.4}
#             on_release: app.root.current = "favourites"
#         Button:
#             text: "Logout"
#             font_size: root._buttonfontsize
#             size_hint: 0.3, 0.2
#             pos_hint: {"top": 0.2, "center_x": 0.5}
#             on_release: app.root.current = "logout_pg"
<TopNavigationBar>:
    ActionView:
        id: top_bar_view
        use_separator: True
        ActionPrevious:
            id: top_bar_previous
            title: root.text
            with_previous: False

<BottomNavigationBar>:
    ActionView:
        id: btm_bar_view
        ActionPrevious:
            with_previous: False
        ActionToggleButton:
            id: stalls_btn
            text: 'Stalls'
            on_release: app.root.current = 'stalls'
            allow_no_selection: False
            group: "btm_bar"
        ActionToggleButton:
            id: my_orders_btn
            text: 'My Orders'
            on_release: app.root.current = 'my_orders'
            allow_no_selection: False
            group: "btm_bar"
        ActionToggleButton:
            id: logout_btn
            text: 'Logout'
            on_release: app.root.current = 'logout_pg'
            allow_no_selection: False
            group: "btm_bar"

<Stalls>:
    name: "stalls"
    layout_content: layout_content
    BoxLayout:
        orientation: "vertical"
        TopNavigationBar:
            id: top_bar
        ScrollView:
            size: self.size
            do_scroll_y: True
            BoxLayout:
                id: layout_content
                orientation: "vertical"
                spacing: 200
                size_hint_y: None
                height: self.minimum_height
                StallButton:
                    text: "Test text"
                Label:
                    text: "test"
                    font_size: 80
                Label:
                    text: "tesssst"
                    font_size: 80
                Label:
                    text: "test"
                    font_size: 80
                Label:
                    text: "test4"
                    font_size: 80
                Label:
                    text: "teeest"
                    font_size: 80
                Label:
                    text: "test"
                    font_size: 80
                Label:
                    text: "test"
                    font_size: 80
                Label:
                    text: "test"
                    font_size: 80
                Label:
                    text: "test"
                    font_size: 80

        BottomNavigationBar:
            id: btm_bar
            stalls_btn: "down"

<StallButton>:
    background_color: 0,0,0,0
    size_y: self.line_height
    canvas.before:
        Color:
            rgba: (.4,.4,.4,1) if self.state=='normal' else (0,.7,.7,1) 
        RoundedRectangle:
            size: root.size
            pos: root.pos
            radius: [50,]

# <Stalls>:
#     name: "stalls"
#     canvas.before:
#         Color:
#             rgba: 1, 1, 1, 1
#         Rectangle:
#             pos: self.pos
#             size: self.size
#     FloatLayout:
#         Button:
#             color: 1, 1, 1, 1
#             font_size: root._buttonfontsize
#             size_hint: 0.3, 0.2
#             pos_hint: {"center_x": 0.5, "top": 0.2}
#             text: "Back"
#             on_release: app.root.current = "main"
#         Label:
#             id: stall_text
#             text: "Stalls"
#             font_size: root._titlefontsize/2
#             color: 0, 0, 0, 1
#             size_hint: 1, None
#             spacing: 20
#             pos_hint: {"top": 1}

<My_Orders>:
    name: "my_orders"
    BoxLayout:
        orientation: "vertical"
        TopNavigationBar:
            id: top_bar
        Label:
            text: 'content'
        BottomNavigationBar:
            id: btm_bar
            my_orders_btm: "down"


<Logout_Confirm>:
    name: "logout_pg"
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size
    FloatLayout:
        Button:
            font_size: root._buttonfontsize
            size_hint: 0.3, 0.2
            pos_hint: {"center_x": 0.5, "top": 1}
            text: "Back"
            on_release: app.root.current = "stalls"
        Button:
            font_size: root._buttonfontsize
            size_hint: 0.3, 0.2
            pos_hint: {"center_x": 0.5, "top": 0.2}
            text: "Logout"
            on_release: app.root.current = "login"
        Label:
            id: logout_text
            text: "Do you want to log out?"
            font_size: root._titlefontsize/2
            color: 1, 0, 0, 1
    BottomNavigationBar:
        id: btm_bar
        

