#:kivy 1.10.1
#File name: main.py
#:include login.kv
#: import FadeTransition kivy.uix.screenmanager.FadeTransition
#: import Window kivy.core.window.Window

ScreenManagement:
    id: screenmanager
    transition: FadeTransition()
    LoginPage:
    SignUpPage:
    Logout_Confirm:
    Stalls:
    StallScreen:
    My_Orders:
    Favourites:

<TopNavigationBar>:
    ActionView:
        id: top_bar_view
        use_separator: True
        ActionPrevious:
            id: top_bar_previous
            title: root.text
            with_previous: False

<BottomNavigationBar>:
    ActionView:
        id: btm_bar_view
        ActionPrevious:
            with_previous: False
        ActionToggleButton:
            id: stalls_btn
            text: 'Stalls'
            on_release: app.root.current = 'stalls'
            allow_no_selection: False
            group: "btm_bar"
        ActionToggleButton:
            id: my_orders_btn
            text: 'My Orders'
            on_release: app.root.current = 'my_orders'
            allow_no_selection: False
            group: "btm_bar"
        ActionToggleButton:
            id: logout_btn
            text: 'Logout'
            on_release: app.root.current = 'logout_pg'
            allow_no_selection: False
            group: "btm_bar"

<Stalls>:
    name: "stalls"
    layout_content: layout_content
    canvas.before:
        Color:
            rgb: 0.8, 0.8, 0.8
        Rectangle:
            size: self.size
            pos: self.pos
    BoxLayout:
        orientation: "vertical"
        TopNavigationBar:
            id: top_bar
            text: "Stalls"
        ScrollView:
            size: self.size
            do_scroll_y: True
            GridLayout:
                id: layout_content
                orientation: "vertical"
                cols: 2
                size_hint_y: None
                spacing: 10
                padding: 20
                height: self.minimum_height
                StallButton:
                    id: btn_1
                    source: "japanese.jpg"
                    label_txt: "Japanese"
                    stall_name: "Japanese Stall"
                StallButton:
                    text: "Test text"
                StallButton:
                    text: "Test text"
                StallButton:
                    text: "Test text"
                StallButton:
                    text: "Test text"
                StallButton:
                    text: "Test text"
                StallButton:
                    text: "Test text"
                StallButton:
                    text: "Test text"
                StallButton:
                    text: "Test text"
        BottomNavigationBar:
            id: btm_bar
            stalls_btn: "down"

<StallButton>:
    id: stall_btn
    background_color: 0,0,0,0
    size: self.size
    padding: 40, 40
    size_hint_y: None
    height: self.width
    on_release: self.parent.parent.parent.parent.btn_pressed(self.stall_name)
    Image:
        x: self.parent.x
        y: self.parent.y
        size: self.parent.size
        source: self.parent.source
        allow_stretch: True
        keep_ratio: False
        color: 1, 1, 1, 0.5
    Label:
        # size: self.texture_size
        center_x: self.parent.center_x
        center_y: self.parent.center_y
        text: self.parent.label_txt
        font_size: root.btn_txt
        color: 0, 0, 0, 1

<StallScreen>:
    name: "stall_screen"
    id: stall_screen
    current_stall: self.manager.current_stall
    canvas.before:
        Color:
            rgb: 0.8, 0.8, 0.8
        Rectangle:
            size: self.size
            pos: self.pos
    BoxLayout:
        orientation: "vertical"
        TopNavigationBar:
            id: top_bar
        ScrollView:
            size: self.size
            do_scroll_y: True
            GridLayout:
                id: stall_grd
                cols: 2
                column_default_force: True,
                column_default_width: Window.width/2
                height: self.minimum_height
                spacing: 10
                padding: 20
                size_hint_y: None
        BottomNavigationBar:
            id: btm_bar

<FoodLabel>:
    font_size: 40
    color: [0, 0, 0, 1]
    size_hint_y: None


<My_Orders>:
    name: "my_orders"
    BoxLayout:
        orientation: "vertical"
        TopNavigationBar:
            id: top_bar
            text: "My Orders"
        Label:
            text: 'content'
        BottomNavigationBar:
            id: btm_bar
            my_orders_btm: "down"


<Logout_Confirm>:
    name: "logout_pg"
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size
    FloatLayout:
        Button:
            font_size: root._buttonfontsize
            size_hint: 0.3, 0.2
            pos_hint: {"center_x": 0.5, "top": 1}
            text: "Back"
            on_release: app.root.current = "stalls"
        Button:
            font_size: root._buttonfontsize
            size_hint: 0.3, 0.2
            pos_hint: {"center_x": 0.5, "top": 0.2}
            text: "Logout"
            on_release: app.root.current = "login"
        Label:
            id: logout_text
            text: "Do you want to log out?"
            font_size: root._titlefontsize/2
            color: 1, 0, 0, 1
    BottomNavigationBar:
        id: btm_bar
        

